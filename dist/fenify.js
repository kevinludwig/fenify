/*! For license information please see fenify.js.LICENSE.txt */
!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("fenify",[],e):"object"==typeof exports?exports.fenify=e():r.fenify=e()}(this,(function(){return function(r){var e={};function n(t){if(e[t])return e[t].exports;var o=e[t]={i:t,l:!1,exports:{}};return r[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=r,n.c=e,n.d=function(r,e,t){n.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,e){if(1&e&&(r=n(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var o in r)n.d(t,o,function(e){return r[e]}.bind(null,o));return t},n.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(e,"a",e),e},n.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},n.p="",n(n.s=1)}([function(r,e,n){var t,o=function(r){var e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",n=["1-0","0-1","1/2-1/2","*"],t={b:[16,32,17,15],w:[-16,-32,-17,-15]},o={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},i=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],f=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],u={p:0,n:1,b:2,r:3,q:4,k:5},a={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},l={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},p={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},s={w:[{square:p.a1,flag:l.QSIDE_CASTLE},{square:p.h1,flag:l.KSIDE_CASTLE}],b:[{square:p.a8,flag:l.QSIDE_CASTLE},{square:p.h8,flag:l.KSIDE_CASTLE}]},c=new Array(128),v={w:-1,b:-1},g="w",h={w:0,b:0},d=-1,b=0,E=1,m=[],_={};function y(r){void 0===r&&(r=!1),c=new Array(128),v={w:-1,b:-1},g="w",h={w:0,b:0},d=-1,b=0,E=1,m=[],r||(_={}),T(w())}function S(){A(e)}function A(r,e){void 0===e&&(e=!1);var n=r.split(/\s+/),t=n[0],o=0;if(!P(r).valid)return!1;y(e);for(var i=0;i<t.length;i++){var f=t.charAt(i);if("/"===f)o+=8;else if(-1!=="0123456789".indexOf(f))o+=parseInt(f,10);else{var u=f<"a"?"w":"b";R({type:f.toLowerCase(),color:u},W(o)),o++}}return g=n[1],n[2].indexOf("K")>-1&&(h.w|=l.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(h.w|=l.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(h.b|=l.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(h.b|=l.QSIDE_CASTLE),d="-"===n[3]?-1:p[n[3]],b=parseInt(n[4],10),E=parseInt(n[5],10),T(w()),!0}function P(r){var e="No errors.",n="FEN string must contain six space-delimited fields.",t="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",f="3rd field (castling availability) is invalid.",u="2nd field (side to move) is invalid.",a="1st field (piece positions) does not contain 8 '/'-delimited rows.",l="1st field (piece positions) is invalid [consecutive numbers].",p="1st field (piece positions) is invalid [invalid piece].",s="1st field (piece positions) is invalid [row too large].",c="Illegal en-passant square",v=r.split(/\s+/);if(6!==v.length)return{valid:!1,error_number:1,error:n};if(isNaN(v[5])||parseInt(v[5],10)<=0)return{valid:!1,error_number:2,error:t};if(isNaN(v[4])||parseInt(v[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(v[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(v[2]))return{valid:!1,error_number:5,error:f};if(!/^(w|b)$/.test(v[1]))return{valid:!1,error_number:6,error:u};var g=v[0].split("/");if(8!==g.length)return{valid:!1,error_number:7,error:a};for(var h=0;h<g.length;h++){for(var d=0,b=!1,E=0;E<g[h].length;E++)if(isNaN(g[h][E])){if(!/^[prnbqkPRNBQK]$/.test(g[h][E]))return{valid:!1,error_number:9,error:p};d+=1,b=!1}else{if(b)return{valid:!1,error_number:8,error:l};d+=parseInt(g[h][E],10),b=!0}if(8!==d)return{valid:!1,error_number:10,error:s}}return"3"==v[3][1]&&"w"==v[1]||"6"==v[3][1]&&"b"==v[1]?{valid:!1,error_number:11,error:c}:{valid:!0,error_number:0,error:e}}function w(){for(var r=0,e="",n=p.a8;n<=p.h1;n++){if(null==c[n])r++;else{r>0&&(e+=r,r=0);var t=c[n].color,o=c[n].type;e+="w"===t?o.toUpperCase():o.toLowerCase()}n+1&136&&(r>0&&(e+=r),n!==p.h1&&(e+="/"),r=0,n+=8)}var i="";h.w&l.KSIDE_CASTLE&&(i+="K"),h.w&l.QSIDE_CASTLE&&(i+="Q"),h.b&l.KSIDE_CASTLE&&(i+="k"),h.b&l.QSIDE_CASTLE&&(i+="q"),i=i||"-";var f=-1===d?"-":W(d);return[e,g,i,f,b,E].join(" ")}function C(r){for(var e=0;e<r.length;e+=2)"string"==typeof r[e]&&"string"==typeof r[e+1]&&(_[r[e]]=r[e+1]);return _}function T(r){m.length>0||(r!==e?(_.SetUp="1",_.FEN=r):(delete _.SetUp,delete _.FEN))}function I(r){var e=c[p[r]];return e?{type:e.type,color:e.color}:null}function R(r,e){if(!("type"in r)||!("color"in r))return!1;if(-1==="pnbrqkPNBRQK".indexOf(r.type.toLowerCase()))return!1;if(!(e in p))return!1;var n=p[e];return("k"!=r.type||-1==v[r.color]||v[r.color]==n)&&(c[n]={type:r.type,color:r.color},"k"===r.type&&(v[r.color]=n),T(w()),!0)}function O(r,e,n,t,o){var i={color:g,from:e,to:n,flags:t,piece:r[e].type};return o&&(i.flags|=l.PROMOTION,i.promotion=o),r[n]?i.captured=r[n].type:t&l.EP_CAPTURE&&(i.captured="p"),i}function L(r){function e(r,e,n,t,o){if("p"!==r[n].type||0!==F(t)&&7!==F(t))e.push(O(r,n,t,o));else for(var i=["q","r","b","n"],f=0,u=i.length;f<u;f++)e.push(O(r,n,t,o,i[f]))}var n=[],i=g,f=H(i),u={b:1,w:6},a=p.a8,s=p.h1,b=!1,E=void 0===r||!("legal"in r)||r.legal;if(void 0!==r&&"square"in r){if(!(r.square in p))return[];a=s=p[r.square],b=!0}for(var m=a;m<=s;m++)if(136&m)m+=7;else{var _=c[m];if(null!=_&&_.color===i)if("p"===_.type){var y=m+t[i][0];if(null==c[y]){e(c,n,m,y,l.NORMAL);y=m+t[i][1];u[i]===F(m)&&null==c[y]&&e(c,n,m,y,l.BIG_PAWN)}for(S=2;S<4;S++){136&(y=m+t[i][S])||(null!=c[y]&&c[y].color===f?e(c,n,m,y,l.CAPTURE):y===d&&e(c,n,m,d,l.EP_CAPTURE))}}else for(var S=0,A=o[_.type].length;S<A;S++){var P=o[_.type][S];for(y=m;!(136&(y+=P));){if(null!=c[y]){if(c[y].color===i)break;e(c,n,m,y,l.CAPTURE);break}if(e(c,n,m,y,l.NORMAL),"n"===_.type||"k"===_.type)break}}}if(!b||s===v[i]){if(h[i]&l.KSIDE_CASTLE){var w=(C=v[i])+2;null!=c[C+1]||null!=c[w]||q(f,v[i])||q(f,C+1)||q(f,w)||e(c,n,v[i],w,l.KSIDE_CASTLE)}if(h[i]&l.QSIDE_CASTLE){var C;w=(C=v[i])-2;null!=c[C-1]||null!=c[C-2]||null!=c[C-3]||q(f,v[i])||q(f,C-1)||q(f,w)||e(c,n,v[i],w,l.QSIDE_CASTLE)}}if(!E)return n;var T=[];for(m=0,A=n.length;m<A;m++)B(n[m]),D(i)||T.push(n[m]),M();return T}function N(r,e){var n="";if(r.flags&l.KSIDE_CASTLE)n="O-O";else if(r.flags&l.QSIDE_CASTLE)n="O-O-O";else{var t=function(r,e){for(var n=L({legal:!e}),t=r.from,o=r.to,i=r.piece,f=0,u=0,a=0,l=0,p=n.length;l<p;l++){var s=n[l].from,c=n[l].to,v=n[l].piece;i===v&&t!==s&&o===c&&(f++,F(t)===F(s)&&u++,G(t)===G(s)&&a++)}if(f>0)return u>0&&a>0?W(t):a>0?W(t).charAt(1):W(t).charAt(0);return""}(r,e);"p"!==r.piece&&(n+=r.piece.toUpperCase()+t),r.flags&(l.CAPTURE|l.EP_CAPTURE)&&("p"===r.piece&&(n+=W(r.from)[0]),n+="x"),n+=W(r.to),r.flags&l.PROMOTION&&(n+="="+r.promotion.toUpperCase())}return B(r),K()&&(Q()?n+="#":n+="+"),M(),n}function k(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function q(r,e){for(var n=p.a8;n<=p.h1;n++)if(136&n)n+=7;else if(null!=c[n]&&c[n].color===r){var t=c[n],o=n-e,a=o+119;if(i[a]&1<<u[t.type]){if("p"===t.type){if(o>0){if("w"===t.color)return!0}else if("b"===t.color)return!0;continue}if("n"===t.type||"k"===t.type)return!0;for(var l=f[a],s=n+l,v=!1;s!==e;){if(null!=c[s]){v=!0;break}s+=l}if(!v)return!0}}return!1}function D(r){return q(H(r),v[r])}function K(){return D(g)}function Q(){return K()&&0===L().length}function x(){return!K()&&0===L().length}function U(){for(var r={},e=[],n=0,t=0,o=p.a8;o<=p.h1;o++)if(t=(t+1)%2,136&o)o+=7;else{var i=c[o];i&&(r[i.type]=i.type in r?r[i.type]+1:1,"b"===i.type&&e.push(t),n++)}if(2===n)return!0;if(3===n&&(1===r.b||1===r.n))return!0;if(n===r.b+2){var f=0,u=e.length;for(o=0;o<u;o++)f+=e[o];if(0===f||f===u)return!0}return!1}function j(){for(var r=[],e={},n=!1;;){var t=M();if(!t)break;r.push(t)}for(;;){var o=w().split(" ").slice(0,4).join(" ");if(e[o]=o in e?e[o]+1:1,e[o]>=3&&(n=!0),!r.length)break;B(r.pop())}return n}function B(r){var e=g,n=H(e);if(function(r){m.push({move:r,kings:{b:v.b,w:v.w},turn:g,castling:{b:h.b,w:h.w},ep_square:d,half_moves:b,move_number:E})}(r),c[r.to]=c[r.from],c[r.from]=null,r.flags&l.EP_CAPTURE&&("b"===g?c[r.to-16]=null:c[r.to+16]=null),r.flags&l.PROMOTION&&(c[r.to]={type:r.promotion,color:e}),"k"===c[r.to].type){if(v[c[r.to].color]=r.to,r.flags&l.KSIDE_CASTLE){var t=r.to-1,o=r.to+1;c[t]=c[o],c[o]=null}else if(r.flags&l.QSIDE_CASTLE){t=r.to+1,o=r.to-2;c[t]=c[o],c[o]=null}h[e]=""}if(h[e])for(var i=0,f=s[e].length;i<f;i++)if(r.from===s[e][i].square&&h[e]&s[e][i].flag){h[e]^=s[e][i].flag;break}if(h[n])for(i=0,f=s[n].length;i<f;i++)if(r.to===s[n][i].square&&h[n]&s[n][i].flag){h[n]^=s[n][i].flag;break}d=r.flags&l.BIG_PAWN?"b"===g?r.to-16:r.to+16:-1,"p"===r.piece||r.flags&(l.CAPTURE|l.EP_CAPTURE)?b=0:b++,"b"===g&&E++,g=H(g)}function M(){var r=m.pop();if(null==r)return null;var e=r.move;v=r.kings,g=r.turn,h=r.castling,d=r.ep_square,b=r.half_moves,E=r.move_number;var n,t,o=g,i=H(g);if(c[e.from]=c[e.to],c[e.from].type=e.piece,c[e.to]=null,e.flags&l.CAPTURE)c[e.to]={type:e.captured,color:i};else if(e.flags&l.EP_CAPTURE){var f;f="b"===o?e.to-16:e.to+16,c[f]={type:"p",color:i}}e.flags&(l.KSIDE_CASTLE|l.QSIDE_CASTLE)&&(e.flags&l.KSIDE_CASTLE?(n=e.to+1,t=e.to-1):e.flags&l.QSIDE_CASTLE&&(n=e.to-2,t=e.to+1),c[n]=c[t],c[t]=null);return e}function $(r,e){var n=k(r);if(e){var t=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(t)var o=t[1],i=t[2],f=t[3],u=t[4]}for(var a=L(),l=0,s=a.length;l<s;l++){if(n===k(N(a[l]))||e&&n===k(N(a[l],!0)))return a[l];if(t&&(!o||o.toLowerCase()==a[l].piece)&&p[i]==a[l].from&&p[f]==a[l].to&&(!u||u.toLowerCase()==a[l].promotion))return a[l]}return null}function F(r){return r>>4}function G(r){return 15&r}function W(r){var e=G(r),n=F(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function H(r){return"w"===r?"b":"w"}function Z(r){var e=function r(e){var n=e instanceof Array?[]:{};for(var t in e)n[t]="object"==typeof t?r(e[t]):e[t];return n}(r);e.san=N(e,!1),e.to=W(e.to),e.from=W(e.from);var n="";for(var t in l)l[t]&e.flags&&(n+=a[t]);return e.flags=n,e}function z(r){return r.replace(/^\s+|\s+$/g,"")}return A(void 0===r?e:r),{WHITE:"w",BLACK:"b",PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k",SQUARES:function(){for(var r=[],e=p.a8;e<=p.h1;e++)136&e?e+=7:r.push(W(e));return r}(),FLAGS:a,load:function(r){return A(r)},reset:function(){return S()},moves:function(r){for(var e=L(r),n=[],t=0,o=e.length;t<o;t++)void 0!==r&&"verbose"in r&&r.verbose?n.push(Z(e[t])):n.push(N(e[t],!1));return n},in_check:function(){return K()},in_checkmate:function(){return Q()},in_stalemate:function(){return x()},in_draw:function(){return b>=100||x()||U()||j()},insufficient_material:function(){return U()},in_threefold_repetition:function(){return j()},game_over:function(){return b>=100||Q()||x()||U()||j()},validate_fen:function(r){return P(r)},fen:function(){return w()},board:function(){for(var r=[],e=[],n=p.a8;n<=p.h1;n++)null==c[n]?e.push(null):e.push({type:c[n].type,color:c[n].color}),n+1&136&&(r.push(e),e=[],n+=8);return r},pgn:function(r){var e="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\n",n="object"==typeof r&&"number"==typeof r.max_width?r.max_width:0,t=[],o=!1;for(var i in _)t.push("["+i+' "'+_[i]+'"]'+e),o=!0;o&&m.length&&t.push(e);for(var f=[];m.length>0;)f.push(M());for(var u=[],a="";f.length>0;){var l=f.pop();m.length||"b"!==l.color?"w"===l.color&&(a.length&&u.push(a),a=E+"."):a=E+". ...",a=a+" "+N(l,!1),B(l)}if(a.length&&u.push(a),void 0!==_.Result&&u.push(_.Result),0===n)return t.join("")+u.join(" ");var p=0;for(i=0;i<u.length;i++)p+u[i].length>n&&0!==i?(" "===t[t.length-1]&&t.pop(),t.push(e),p=0):0!==i&&(t.push(" "),p++),t.push(u[i]),p+=u[i].length;return t.join("")},load_pgn:function(r,e){var t=void 0!==e&&"sloppy"in e&&e.sloppy;function o(r){return r.replace(/\\/g,"\\")}var i="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",f=new RegExp("^(\\[((?:"+o(i)+")|.)*\\])(?:"+o(i)+"){2}"),u=f.test(r)?f.exec(r)[1]:"";S();var a=function(r,e){for(var n="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",t={},i=r.split(new RegExp(o(n))),f="",u="",a=0;a<i.length;a++)f=i[a].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),u=i[a].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),z(f).length>0&&(t[f]=u);return t}(u,e);for(var l in a)C([l,a[l]]);if(!("1"!==a.SetUp||"FEN"in a&&A(a.FEN,!0)))return!1;var p=r.replace(u,"").replace(new RegExp(o(i),"g")," ");p=p.replace(/(\{[^}]+\})+?/g,"");for(var s=/(\([^\(\)]+\))+?/g;s.test(p);)p=p.replace(s,"");var c=z(p=(p=(p=p.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));c=c.join(",").replace(/,,+/g,",").split(",");for(var v="",g=0;g<c.length-1;g++){if(null==(v=$(c[g],t)))return!1;B(v)}if(v=c[c.length-1],n.indexOf(v)>-1)(function(r){for(var e in r)return!0;return!1})(_)&&void 0===_.Result&&C(["Result",v]);else{if(null==(v=$(v,t)))return!1;B(v)}return!0},header:function(){return C(arguments)},ascii:function(){return function(){for(var r="   +------------------------+\n",e=p.a8;e<=p.h1;e++){if(0===G(e)&&(r+=" "+"87654321"[F(e)]+" |"),null==c[e])r+=" . ";else{var n=c[e].type;r+=" "+("w"===c[e].color?n.toUpperCase():n.toLowerCase())+" "}e+1&136&&(r+="|\n",e+=8)}return r+="   +------------------------+\n",r+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return g},move:function(r,e){var n=void 0!==e&&"sloppy"in e&&e.sloppy,t=null;if("string"==typeof r)t=$(r,n);else if("object"==typeof r)for(var o=L(),i=0,f=o.length;i<f;i++)if(r.from===W(o[i].from)&&r.to===W(o[i].to)&&(!("promotion"in o[i])||r.promotion===o[i].promotion)){t=o[i];break}if(!t)return null;var u=Z(t);return B(t),u},undo:function(){var r=M();return r?Z(r):null},clear:function(){return y()},put:function(r,e){return R(r,e)},get:function(r){return I(r)},remove:function(r){return function(r){var e=I(r);return c[p[r]]=null,e&&"k"===e.type&&(v[e.color]=-1),T(w()),e}(r)},perft:function(r){return function r(e){for(var n=L({legal:!1}),t=0,o=g,i=0,f=n.length;i<f;i++){if(B(n[i]),!D(o))if(e-1>0)t+=r(e-1);else t++;M()}return t}(r)},square_color:function(r){if(r in p){var e=p[r];return(F(e)+G(e))%2==0?"light":"dark"}return null},history:function(r){for(var e=[],n=[],t=(void 0!==r&&"verbose"in r&&r.verbose);m.length>0;)e.push(M());for(;e.length>0;){var o=e.pop();t?n.push(Z(o)):n.push(N(o)),B(o)}return n}}};e.Chess=o,void 0===(t=function(){return o}.call(e,n,e,r))||(r.exports=t)},function(r,e,n){"use strict";n.r(e),n.d(e,"fenify",(function(){return f}));var t=n(0),o=n.n(t);const i=(r,e)=>{const n=new o.a(r);return e.map(r=>{const e=n.fen(),t=n.move(r.move.replace("...",""));if(!t)throw new Error("invalid move, "+r.move+", fen: ",e);const o=n.fen();return{...r,from:t.from,to:t.to,fen:o,ravs:r.ravs&&r.ravs.map(r=>({...r,moves:i(e,r.moves)}))}})},f=r=>{const e=r.headers.FEN||"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";return{...r,moves:i(e,r.moves)}};e.default=f}])}));
//# sourceMappingURL=fenify.js.map